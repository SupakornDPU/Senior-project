<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Manage Classrooms</title>

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />

    <!-- Bootrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css" />

    <!-- CSS -->
    <link rel="stylesheet" href="css/admin.css" />

    <!-- Data table -->
    <link rel="stylesheet" href="//cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">

</head>

<body id="body-pd" class="body-pd">
    <header class="header">
        <div class="header__container">
            <span class="nav__logo-name">Admin</span>
            <div class="header__toggle">
                <i class='bx bx-menu' id="header-toggle"></i>
            </div>
        </div>
    </header>
    <div class="nav" id="navbar">
        <nav class="nav__container">
            <div>
                <a href="#" class="nav__links nav__logo">
                    <img src="img/python.png" alt="" class="header__img">
                    <span class="nav__logo-name">Admin</span>
                </a>
                <hr class="style">
                <div class="nav__list">
                    <div class="nav__items">
                        <a href="#" class="nav__link ">
                            <i class='bx bx-home nav__icon'></i>
                            <span class="nav__name">Home</span>
                        </a>
                        <div class="nav__items">
                            <h3 class="nav__subtitle">Menu</h3>
                            <a href="admin_manage_teachers.html" class="nav__link ">
                                <i class="fa-solid fa-user-graduate nav__icon"></i>
                                <span class="nav__name">Manage Teachers</span>
                            </a>
                            <a href="admin_manage_students.html" class="nav__link ">
                                <i class="fa-solid fa-user nav__icon"></i>
                                <span class="nav__name">Manage Students</span>
                            </a>
                            <a href="admin_manage_classroom.html" class="nav__link active">
                                <i class="fa-solid fa-layer-group nav__icon"></i>
                                <span class="nav__name">Mange Classrom</span>
                            </a>
                            <a href="admin_manage_flashcard.html" class="nav__link ">
                                <i class="fa-solid fa-inbox nav__icon"></i>
                                <span class="nav__name">Mange Flashcard</span>
                            </a>
                        </div>
                    </div>
                </div>
                <a href="#" class="nav__link nav__logout">
                    <i class='bx bx-log-out nav__icon'></i>
                    <span class="nav__name">Log Out</span>
                </a>
        </nav>
    </div>

    <!--!Container-->
    <div class="container justify-content-center align-items-center text-center inline">
        <h2 style="margin: 40px 0px 20px 0px; color: black;">Manage Classrooms </h2>
    </div>
    <div class="table-responsive " style="padding: 2rem;">
        <table class="table table-striped table-hover table-info" id="classroomTable">
            <thead class="table-active">
                <tr>
                    <th>#</th>
                    <th>Id</th>
                    <th>Class Name</th>
                    <th>Creator</th>
                    <th>Description</th>
                    <th>Code</th>
                    <th></th>
                </tr>
            </thead>
            <tbody id="classroomTableBody">
            </tbody>
        </table>
    </div>
    <!--!Container-->

    <!-- SCRIPT -->
    <script src="js/script.js"></script>

    <!-- Bootrap 5 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- Data table -->
    <script src="//cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

    <script>
        // API Get data
        fetch('/projectsenior/admin/classroom', {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json'
            },
        })
            .then(response => response.json())
            .then(data => {
                // console.log(data);
                let html = '';
                data.forEach((item, index) => {
                    // console.log(item);
                    html += `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${item._id}</td>
                        <td>${item.classroom_name}</td>
                        <td>${item.classroom_creator}</td>
                        <td>${item.classroom_des}</td>
                        <td>${item.classroom_code}</td>
                        <td> <button type="submit" class="btn btn-lg btn-delete" style="padding: 5px;" onclick="deleteTeacher('${item._id}')">Delete</button></td>
                    </tr>
                `;
                })
                document.getElementById('classroomTableBody').innerHTML = html;
                $('#classroomTableBody').html(html).promise().done(() => {
                    $('#classroomTable').DataTable();
                })
            })

        // DELETE CLASSROOM
        function deleteTeacher(_id) {
            fetch('/projectsenior/admin/classroom/' + _id, {
                method: 'DELETE',
            })
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    location.reload();
                })
        }

        const showMenu = (headerToggle, navbarId) => {
            const toggleBtn = document.getElementById(headerToggle),
                nav = document.getElementById(navbarId)
            // Validate that variables exist
            if (headerToggle && navbarId) {
                toggleBtn.addEventListener('click', () => {
                    // We add the show-menu class to the div tag with the nav__menu class
                    nav.classList.toggle('show-menu')
                    // change icon
                    toggleBtn.classList.toggle('bx-x')
                })
            }
        }
        showMenu('header-toggle', 'navbar')
        /*==================== LINK ACTIVE ====================*/
        const linkColor = document.querySelectorAll('.nav__link')
        function colorLink() {
            linkColor.forEach(l => l.classList.remove('active'))
            this.classList.add('active')
        }
        linkColor.forEach(l => l.addEventListener('click', colorLink))
    </script>
</body>

</html>